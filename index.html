<script>
  const draggable = document.getElementById("draggable");

  let isDragging = false;
  let offsetX = 0, offsetY = 0;

  // Helper function to get the correct coordinates for mouse or touch events
  function getEventCoordinates(e) {
    if (e.touches) {
      return { x: e.touches[0].clientX, y: e.touches[0].clientY };
    }
    return { x: e.clientX, y: e.clientY };
  }

  // Start dragging (mouse or touch)
  function startDrag(e) {
    isDragging = true;

    const { x, y } = getEventCoordinates(e);

    // Calculate the offset of the cursor relative to the element's top-left corner
    offsetX = x - draggable.offsetLeft;
    offsetY = y - draggable.offsetTop;

    draggable.style.cursor = "grabbing";

    // Prevent default behavior to avoid touch scrolling
    if (e.touches) e.preventDefault();
  }

  // Dragging (mouse or touch)
  function drag(e) {
    if (!isDragging) return;

    const { x, y } = getEventCoordinates(e);

    // Update the position of the draggable element
    draggable.style.left = `${x - offsetX}px`;
    draggable.style.top = `${y - offsetY}px`;

    // Prevent default behavior to avoid touch scrolling
    if (e.touches) e.preventDefault();
  }

  // End dragging (mouse or touch)
  function endDrag() {
    isDragging = false;
    draggable.style.cursor = "grab";
  }

  // Event listeners for mouse events
  draggable.addEventListener("mousedown", startDrag);
  window.addEventListener("mousemove", drag);
  window.addEventListener("mouseup", endDrag);

  // Event listeners for touch events
  draggable.addEventListener("touchstart", startDrag);
  window.addEventListener("touchmove", drag);
  window.addEventListener("touchend", endDrag);
</script>
